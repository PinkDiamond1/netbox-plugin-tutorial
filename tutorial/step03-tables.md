# Step 3: Tables

You're probably familiar with object lists in NetBox. This is how we display all the instances of a certain type of object - such as sites or devices - in the user interface. These lists are generated by table classes defined for each model, utilizing the [django-tables2](https://django-tables2.readthedocs.io/) library.

While it would be feasible to generate raw HTML for `<table>` elements directly within the template, this would be cumbersome and difficult to maintain. Additionally, these dynamic table classes provide convenient functionality like sorting and pagination.

:blue_square: **Note:** If you skipped the previous step, run `git checkout step02-models`.

## Create the Tables

We'll create two tables, one for each of our models. Begin by creating `tables.py` in the `netbox_access_lists/` directory.

```bash
$ cd netbox_access_lists/
$ touch tables.py
```

At the top of this file, import the `django-tables2` library, as well as NetBox's `NetBoxTable` class. The latter will serve as the base class for our tables, while the library provides column classes. We'll also import our plugin's models from `models.py`.

```python
import django_tables2 as tables

from netbox.tables import NetBoxTable
from .models import AccessList, AccessListRule
```

### AccessListTable

Create a class named `AccessListTable` as a child of `NetBoxTable`. Within this class, create `Meta` subclassing `NetBoxTable.Meta`; this will define the table's model, fields, and default columns.

```python
class AccessListTable(NetBoxTable):

    class Meta(NetBoxTable.Meta):
        model = AccessList
        fields = ('pk', 'id', 'name', 'default_action', 'comments', 'actions')
        default_columns = ('name', 'default_action')
```

The `model` attribute tells `django-tables2` which model to use when building the table, and the `fields` attribute dictates which model fields get added to the table. `default_columns` controls which of the available columns are displayed by default.

The `pk` and `actions` fields render the checkbox selectors and dropdown menus, respectively, for each table row; these are provided by the NetBoxTable class. The `id` column will display the object's numeric primary key; it is included on almost every table in NetBox but generally disabled by default. The other three columns derive from the fields we defined on the `AccessList` model.

What we have so far is sufficient to render a table, but we can make some small improvements. First, let's make the `name` column a link to each object. To do this, we'll override the default column and pass `linkify=True`.

```python
class AccessListTable(NetBoxTable):
    name = tables.Column(
        linkify=True
    )
```

It would also be nice to include a count showing the number of rules each access list has assigned to it. We can add a custom column named `rule_count` to show this. (The data for this column will be annotated by the view; more on this in step 5.) We'll also need to add this column to our `fields` and (optionally) `default_columns` under the `Meta` subclass. Our finished table should look like this:

```python
class AccessListTable(NetBoxTable):
    name = tables.Column(
        linkify=True
    )
    rule_count = tables.Column()

    class Meta(NetBoxTable.Meta):
        model = AccessList
        fields = ('pk', 'id', 'name', 'rule_count', 'default_action', 'comments', 'actions')
        default_columns = ('name', 'rule_count', 'default_action')
```

### AccessListRuleTable

We'll also create a table for our `AccessListRule` model using the same approach as above. In this case, we don't need to add any custom columns, but we do want to linkify the `access_list` and `index` columns. The former will link to the parent access list, and the latter will link to the individual rule.

```python
class AccessListRuleTable(NetBoxTable):
    access_list = tables.Column(
        linkify=True
    )
    index = tables.Column(
        linkify=True
    )

    class Meta(NetBoxTable.Meta): = AccessListRule
        fields = (
            'pk', 'id', 'access_list', 'index', 'source_prefix', 'source_ports', 'destination_prefix',
            'destination_ports', 'protocol', 'action', 'description', 'actions',
        )
        default_columns = (
            'access_list', 'index', 'source_prefix', 'source_ports', 'destination_prefix',
            'destination_ports', 'protocol', 'action', 'actions',
        )
```

This should be all we need to display objects. Next, we'll define some forms to enable creating and modifying objects.

<div align="center">

:arrow_left: [Step 2: Models](/tutorial/step02-models.md) | [Step 4: Forms](/tutorial/step04-forms.md) :arrow_right:

</div>

